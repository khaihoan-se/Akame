import React from 'react'
import type { GetServerSideProps, NextPage } from 'next'
import Head from 'next/head'
import HomeBanner from '@/components/shared/HomeBanner'
import { Anime } from '@/types'
import AnimeApi from '@/api/AnilistApi'

interface HomaPage {
   trendingAnime: Anime[];
}

const Home: NextPage<HomaPage> = ({
   trendingAnime
}) => {
   return (
      <div>
         <Head>
            <title>Akame - Anime</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/logo.jpeg" />
         </Head>
         <HomeBanner type='anime' data={trendingAnime} />
         <div>Home Components Search</div>
      </div>
   )
}

export const getServerSideProps: GetServerSideProps = async () => {
   const { data: trendingAnime } = await AnimeApi.getAnime({
      type: 'ANIME',
      perPage: 15,
      sort: 'TRENDING_DESC'
   })
   return {
      props: {
         trendingAnime: trendingAnime.Page.media
      }
   }
}

export default Home;
